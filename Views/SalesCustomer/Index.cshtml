@model List<allpax_sale_miner.ViewModels.vm_SalesCustomer>

@*@model IEnumerable<allpax_sale_miner.ViewModels.vm_SalesCustomer>*@

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<hr />
<h3 style="text-align:center">All Equipment Sales</h3>
<h4 style="text-align:center">
    <script>document.write(new Date().toLocaleDateString());</script>
</h4>
<hr />

@*Customer Equipment Sales*@
<head>
    <!-- JQuery -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script>
        $(document).ready(function () {//begin document read jquery statements

            var queries = {};
            var nav_customerCode = '';
            $.each(document.location.search.substr(1).split('&'), function (c, q) {
                var i = q.split('=');
                queries[i[0].toString()] = i[1].toString();
                //console.log(queries[i[0].toString()]);//works as the customer code value
                nav_customerCode = queries[i[0].toString()];
            });
            //console.log(queries);
            //console.log(queries[i[0].toString()]);
            //cCode = queries[i[0].toString()];
            //console.log('c code coming up next');
            //console.log(nav_customerCode.toString());

            //begin fill the customer code dropdown
            $.ajax({
                url: 'DataService.asmx/GetJobNosByCustomerCode',
                method: 'post',
                async: false,
                data: { customerCode: nav_customerCode },
                dataType: 'json',
                success: function (data) {

                    $(data).each(function (index, item) {
                        var tempJobNo = item.jobNo.toString();
                        //$('#dontmatter_home-tab').clone().prop("id", "tab_" + tempJobNo.toString()).appendTo('#jobNoTabs');
                        //$('#yo').clone().prop("id", "tab_" + tempJobNo.toString()).appendTo('#jobNoTabs');
                        //$('#yo').clone().prop("id", "tab_" + tempJobNo.toString()).appendTo('#jobNoTabs');                       
                        //$("#yo").clone().appendTo("#jobNoTabs");
                        //$("#tab_" + tempJobNo.toString()).html(tempJobNo.toString());

                        $("#yo").clone().prop("id", "tab_" + tempJobNo.toString()).appendTo("#jobNoTabs");
                        $("#tab_" + tempJobNo.toString()).children().html(tempJobNo.toString());
                        //$("#tab_J1000").children().attr("href", "#");
                        //$("#tab_" + tempJobNo).children().attr("id", "anchor_" + tempJobNo);
                        $("#tab_" + tempJobNo).children().attr("id", tempJobNo+"-tab");
                        $("#tab_" + tempJobNo).children().attr("href", "#" + tempJobNo);

                        //$('#home-content').clone().prop("id", "tab_" + tempJobNo.toString() + "Content").appendTo('#jobNoTabsContent');
                        //$("#home-content").clone().prop("id", "tab_" + tempJobNo.toString() + "Content").appendTo("#jobNoTabsContent");
                        //$("#home").clone().appendTo("#jobNoTabsContent");
                        //$("#home").clone().prop("id", "tabContent_" + tempJobNo.toString()).appendTo("#jobNoTabsContent");
                        $("#home").clone().prop("id", tempJobNo.toString()).appendTo("#jobNoTabsContent");

                        $("#"+tempJobNo).attr("aria-labelledby", tempJobNo + "-tab".toString());
                        //$("#tabContent_" + tempJobNo).attr("aria-labelledby", tempJobNo + "-tab".toString());
                        //$("#tabContent_" + tempJobNo).html('kjkjkjkjkjk');
                        $("#" + tempJobNo).html(tempJobNo+' relevant dynamic machine data that comes from some ajax queries.');
                        //$("#tab_" + tempJobNo.toString() + "Content").html(tempJobNo.toString()+" content");
                    });
                }               
            });
            //end fill the customer code dropdown
                  
        });//end document read jquery statements
    </script>
</head>
<style>
    table {
        width: 100%;
        table-layout: fixed;
    }

    .kits {
        text-overflow: ellipsis;
        white-space: normal;
        overflow: visible;
        width: 30%;
        max-width: 30%;
    }
</style>
<div class="container-fluid">
    <div class="col-md-12" style="border:none">

        @*<h2>@Html.DisplayFor(modelItem => Model.First().jobNoList.Count)</h2>
        <h2>@Html.DisplayFor(modelItem => Model.First().jobNoList[0])</h2>
        <h2>@Html.DisplayFor(modelItem => Model.First().jobNoList[1])</h2>
        <h2>@Html.DisplayFor(modelItem => Model.First().jobNoList[2])</h2>

        <h2>@Model.First().jobNoList.Count</h2>*@

        @*<div class="row" id="jobNumTest" style="display:">
            <div class="col-md-2">
                jobNoList.Count: <input type="text" id="test" value=@Model.First().jobNoList.Count>
            </div>
        </div>*@

        @*@foreach (var item2 in Model)
        {
            for (var j = 0; j < (Model.First().jobNoList.Count); j++)
            {
                <button type="button" class="btn btn-primary btn-sm">@Html.DisplayFor(modelItem => item2.jobNoList[@j])</button>
            }
        }*@

        @*<ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item" hidden>
                <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home"
                   aria-selected="true">Home</a>
            </li>
        </ul>
        <div class="tab-content" id="myTabContent">
            <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="tab_J1000">
                tab_J1000
            </div>
            <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="tab_J1001">
                tab_J1001
            </div>
            <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="tab_J1002">
                tab_J1002
            </div>
        </div>*@



        @*<table id="datatable_eqpmnt_sales" class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th class="th-sm">
                        Job Number
                    </th>
                    <th class="th-sm">
                        Customer (Customer Code)
                    </th>
                    <th class="th-sm">
                        Model
                    </th>
                    <th class="th-sm">
                        Machine ID
                    </th>
                    <th class="th-sm">
                        Current Kits
                    </th>
                    <th class="th-sm">
                        Available Kits
                    </th>
                    <th class="th-sm">
                        Job List
                    </th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr class="record" id="">
                        <td id="" value=@Html.DisplayFor(modelItem => item.jobNo)>@Html.DisplayFor(modelItem => item.jobNo)</td>
                        <td id="" value=@Html.DisplayFor(modelItem => item.name)>@Html.DisplayFor(modelItem => item.name) (@Html.DisplayFor(modelItem => item.customerCode))</td>
                        <td id="" value=@Html.DisplayFor(modelItem => item.model)>@Html.DisplayFor(modelItem => item.model)</td>
                        <td id="" value=@Html.DisplayFor(modelItem => item.machineID)>@Html.DisplayFor(modelItem => item.machineID)</td>
                        <td class="kits">
                            @for (var i = 0; i < (item.kitsCurrent.Count); i++)
                            {
                                <span>@Html.DisplayFor(modelItem => item.kitsCurrent[@i]), </span>
                            }
                        </td>
                        <td class="kits">
                            @for (var i = 0; i < (item.kitsAvlblbNotInstld.Count); i++)
                            {
                                <span>@Html.DisplayFor(modelItem => item.kitsAvlblbNotInstld[@i]), </span>
                            }
                        </td>
                        <td class="kits">
                            @for (var i = 0; i < (item.jobNoList.Count); i++)
                            {
                                <span>@Html.DisplayFor(modelItem => item.jobNoList[@i]), </span>
                            }
                        </td>
                    </tr>
                }
        </table>*@

        <ul class="nav nav-tabs" id="jobNoTabs" role="tablist">
            <li class="nav-item" id="yo">
                <a class="nav-link" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home"
                   aria-selected="true">J1000 static</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile"
                   aria-selected="false">J1001 static</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="contact-tab" data-toggle="tab" href="#contact" role="tab" aria-controls="contact"
                   aria-selected="false">J1002 static</a>
            </li>
        </ul>
        <div class="tab-content" id="jobNoTabsContent">
            @*<div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                J1000 static
            </div>*@
            <div class="tab-pane fade" id="home" role="tabpanel" aria-labelledby="home-tab">
                J1000 static
            </div>
            <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
                J1001 static
            </div>
            <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">
                J1002 static
            </div>
        </div>
</div>






