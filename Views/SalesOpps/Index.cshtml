@model IEnumerable<allpax_sale_miner.Models.salesOppsModel>

@*@model List<allpax_sale_miner.Models.salesOppsModel>*@

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@*Sales Opps Page*@
<head>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <!-- JQuery -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script>
        $(document).ready(function () {//begin document read jquery statements

            var table = $('#datatable_customers').DataTable({
                orderCellsTop: true,
                fixedHeader: true,
                paging: false,
                //"scrollY": "50vh",
                //"scrollX": true,
                //"scrollCollapse": true,
                order: [[1, "asc"]],
                searching: false
            });

            $('.dataTables_length').addClass('bs-select');
            //begin when a record class is clicked...
            $(".record").on('click keyup change', function () {
                selectedItem0 = $(this).attr("id");//works
                selectedItem1 = $(this).find("#record_item1").html();//works valid for inner html only
                selectedItem2 = $(this).find("#record_item2").html();//works valid for inner html only
                selectedItem3 = $(this).find("#record_item3").html();//works valid for inner html only
                selectedItem4 = $(this).find("#record_item4").html();//works valid for inner html only
                selectedItem5 = $(this).find("#record_item5").html();//works valid for inner html only
                selectedItem6 = $(this).find("#record_item6").html();//works valid for inner html only

                $("#slctd_id").val(selectedItem0);
                $("#slctd_customerCode").val(selectedItem1);
                $("#slctd_name").val(selectedItem2);
                $("#slctd_address").val(selectedItem3);
                $("#slctd_city").val(selectedItem4);
                $("#slctd_state").val(selectedItem5);
                $("#slctd_zipCode").val(selectedItem6);
            });
            //end when a record class is clicked...

            //begin confirm edit record
            $(".btn.btn-primary.updateButton").click(function () {//when a record's edit button is clicked...
                $(this).hide();
                $(this).parent().find(".updateButton").hide();
                $(this).parent().find(".editButton").show();
                $(this).parent().find(".deleteButton").hide();
                $(this).parent().find(".cancelButton").show();

                $(this).parent().parent().attr("contenteditable", "false");

                $(this).parent().parent().css("background-color", "transparent");
                $(this).parent().parent().find(".cancelButton").css("background-color", "royalblue");//change cancel button color after update is clicked
                $(this).parent().find(".cancelButton").hide();
                $(this).parent().find(".deleteButton").show();

                var editItem0 = $("#slctd_id").val();
                var editItem1 = $("#slctd_customerCode").val();
                var editItem2 = $("#slctd_name").val();
                var editItem3 = $("#slctd_address").val();
                var editItem4 = $("#slctd_city").val();
                var editItem5 = $("#slctd_state").val();
                var editItem6 = $("#slctd_zipCode").val();

                alert(
                    "Selected for Edit POST:" + '\n' +
                    "editItem0: " + editItem0 + '\n' +
                    "editItem1: " + editItem1 + '\n' +
                    "editItem2: " + editItem2 + '\n' +
                    "editItem3: " + editItem3 + '\n' +
                    "editItem4: " + editItem4 + '\n' +
                    "editItem5: " + editItem5 + '\n' +
                    "editItem6: " + editItem6 + '\n'
                );

                //begin axios add post
                axios.post('/CustomerMgmt/UpdateCustomer', {
                    id: editItem0,
                    customerCode: editItem1,
                    name: editItem2,
                    address: editItem3,
                    city: editItem4,
                    state: editItem5,
                    zipCode: editItem6,
                })
                    .then(function (response) {
                        console.log(response);
                    })
                    .catch(function (error) {
                        console.log(error);
                    });
                //end axios add post
            });
            //end confirm edit record
            //begin go to salesCustomer page
            $(".btn.btn-primary.eqpmtButton").click(function () {//when a record's edit button is clicked...

                var editItem0 = $("#slctd_id").val();
                var editItem1 = $("#slctd_customerCode").val();
                var editItem2 = $("#slctd_name").val();
                var editItem3 = $("#slctd_address").val();
                var editItem4 = $("#slctd_city").val();
                var editItem5 = $("#slctd_state").val();
                var editItem6 = $("#slctd_zipCode").val();

                window.location = '/SalesCustomer';
            });
            //end confirm edit record
        });//end document read jquery statements
    </script>
</head>
<style>
    div.row {
        width: auto;
        height: auto;
        overflow-x: hidden;
        overflow-y: auto;
        padding: 0px;
    }

    .form-group {
        margin: 5px;
    }
</style>

<div class="container-fluid">
    <hr />
    <!--begin inline add-->
    <div class="row">
        <div class="col-md-12">
            <h5>Current Customer Sales Opportunities</h5>
            <hr />
        </div>
    </div>
    <!--end inline add-->
    <div class="container-fluid">
        <div class="col-md-12" style="border:none">
            <table id="datatable_customers" class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th class="th-sm">
                            Customer Code
                        </th>
                        <th class="th-sm">
                            Equipment Type
                        </th>
                        <th class="th-sm">
                            Model
                        </th>
                        <th class="th-sm">
                            Machine ID
                        </th>
                        <th class="th-sm">
                            Machine ID
                        </th>
                        <th class="th-sm">
                            Kit ID
                        </th>
                        <th class="th-sm">
                            Model
                        </th>
                        <th class="th-sm">
                            Kit ID
                        </th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model)
                    {
                        <tr class="table">
                            <td id="" value=>@item.tbl_customer_eqpmt.customerCode</td>
                            <td id="" value=>@item.tbl_customer_eqpmt.eqpmtType</td>
                            <td id="" value=>@item.tbl_customer_eqpmt.model</td>
                            <td id="" value=>@item.tbl_customer_eqpmt.machineID</td>
                            @*<td id="" value=>@item.tbl_eqpmt_kits_current.machineID</td>
                                <td id="" value=>@item.tbl_eqpmt_kits_current.kitID</td>*@
                            @*<td id="" value=>@item.tbl_eqpmt_kits_avlbl.model</td>
                                <td id="" value=>@item.tbl_eqpmt_kits_avlbl.kitID</td>*@
                            <td>
                                <button class="btn btn-primary btn-sm eqpmtButton">Equipment</button>
                                <button class="btn btn-primary btn-sm salesButton">Sales</button>
                            </td>

                        </tr>
                    }
            </table>
        </div>
    </div>



