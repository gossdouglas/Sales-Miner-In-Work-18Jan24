@model IEnumerable<allpax_sale_miner.Models.tbl_kit>

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
        $(document).ready(function () {//begin document read jquery statements

         //$('#datatable_kitmgmt thead tr').clone(true).appendTo( '#datatable_kitmgmt thead' );
         //$('#datatable_kitmgmt thead tr:eq(1) th').each( function (i) {
         //    var title = $(this).text();
         //    $(this).html( '<input type="text" placeholder=" " />' );
 
         //    $( 'input', this ).on( 'keyup change', function () {
         //        if ( table.column(i).search() !== this.value ) {
         //            table
         //                .column(i)
         //                   .search( this.value )
         //                    .draw();
         //        }
         //    } );
         //} );
 
            var table = $('#datatable_kitmgmt').DataTable({
                orderCellsTop: true,
                fixedHeader: true,
                paging: false,
                order: [[1, "asc"]],
                searching: false
            });
           
            $('.dataTables_length').addClass('bs-select');
            //begin when a record class is clicked...
            $(".record").on('click keyup change', function () {
                selectedItem0 = $(this).attr("id");//works
                selectedItem1 = $(this).find("#record_item1").html();//works valid for inner html only
                selectedItem2 = $(this).find("#record_item2").html();//works valid for inner html only
                selectedItem3 = $(this).find("#record_item3").html();//works valid for inner html only

                //selectedItem4 = $(this).find("#record_item4").html();//works valid for inner html only
                //selectedItem5 = $(this).find("#record_item5").html();//works valid for inner html only
                //selectedItem6 = $(this).find("#record_item6").html();//works valid for inner html only
                //selectedItem7 = $(this).find("#record_item7").html();//works valid for inner html only
                //selectedItem8 = $(this).find("#record_item8").html();//works valid for inner html only

                $("#slctd_id").val(selectedItem0);
                $("#slctd_kitID").val(selectedItem1);
                $("#slctd_description").val(selectedItem2);
                $("#slctd_filePath").val(selectedItem3);

                //$("#slctd_kitItem_1").val(selectedItem4);
                //$("#slctd_kitItem_2").val(selectedItem5);
                //$("#slctd_kitItem_3").val(selectedItem6);
                //$("#slctd_kitItem_4").val(selectedItem7);
                //$("#slctd_kitItem_5").val(selectedItem8);

            });
            //end when a record class is clicked...

            $(".btn.btn-primary.editButton").click(function () {//when a record's edit button is clicked...
                $(this).parent().find(".editButton").hide();
                $(this).parent().find(".updateButton").show();
                $(this).parent().find(".deleteButton").hide();
                $(this).parent().find(".cancelButton").show();

                $(this).parent().parent().css("background-color", "powderblue");//change bkgnd color
                $(this).parent().parent().attr("contenteditable", "true");//set all <td> in the record to editable
                $(this).parent().parent().find("#record_item0").attr("contenteditable", "false");//set the id <td> to not editable
                $(this).parent().parent().find(".cancelButton").css("background-color", "indianred");//change cancel buttn clr after edit is clicked

            });
            $(".btn.btn-primary.cancelButton").click(function () {//when a record's edit button is clicked...
                $(this).parent().find(".editButton").show();
                $(this).parent().find(".updateButton").hide();
                $(this).parent().find(".deleteButton").show();
                $(this).parent().find(".cancelButton").hide();
                $(this).parent().find(".confirmButton").hide();

                $(this).parent().parent().css("background-color", "transparent");
                $(this).parent().parent().attr("contenteditable", "false");
            });
            $(".btn.btn-primary.deleteButton").click(function () {//when a record's edit button is clicked...
                $(this).parent().find(".editButton").hide();
                $(this).parent().find(".updateButton").hide();
                $(this).parent().find(".deleteButton").hide();
                $(this).parent().find(".cancelButton").show();
                $(this).parent().find(".confirmButton").show();
                $(this).parent().parent().css("background-color", "powderblue");//change bkgnd color

            });

            //begin #addButton
            $("#addButton").click(function () {//when the add button is clicked...
                var addItem1 = $("#addRecordItem1").val();
                var addItem2 = $("#addRecordItem2").val();
                var addItem3 = $("#addRecordItem3").val();

                //var addItem4 = $("#addRecordItem4").val();
                //var addItem5 = $("#addRecordItem5").val();
                //var addItem6 = $("#addRecordItem6").val();
                //var addItem7 = $("#addRecordItem7").val();
                //var addItem8 = $("#addRecordItem8").val();

                alert(
                    "Selected for Add POST:" + '\n' +
                    "addItem1: " + addItem1 + '\n' +
                    "addItem2: " + addItem2 + '\n' +
                    "addItem3: " + addItem3 + '\n'
                    //"addItem4: " + addItem4 + '\n' +
                    //"addItem5: " + addItem5 + '\n' +
                    //"addItem6: " + addItem7 + '\n' +
                    //"addItem7: " + addItem7 + '\n' +
                    //"addItem8: " + addItem8 + '\n' 
                );
                $("#addRecordItem1").val('');
                $("#addRecordItem2").val('');
                $("#addRecordItem3").val('');
                //$("#addRecordItem4").val('');
                //$("#addRecordItem5").val('');
                //$("#addRecordItem6").val('');
                //$("#addRecordItem7").val('');
                //$("#addRecordItem8").val('');
                //begin axios add post

                axios.post('/KitMgmt/AddKit', {
                    kitID: addItem1,
                    description: addItem2,
                    filePath: addItem3
                    //kitItem_1: addItem4,
                    //kitItem_2: addItem5,
                    //kitItem_3: addItem6,
                    //kitItem_4: addItem7,
                    //kitItem_5: addItem8,
                })
                    .then(function (response) {
                        console.log(response);
                    })
                    .catch(function (error) {
                        console.log(error);
                    });

                //end axios add post
            });
            //end #addButton

            //begin confirm edit record
            $(".btn.btn-primary.updateButton").click(function () {//when a record's edit button is clicked...
                $(this).hide();
                $(this).parent().find(".updateButton").hide();
                $(this).parent().find(".editButton").show();
                $(this).parent().find(".deleteButton").hide();
                $(this).parent().find(".cancelButton").show();

                $(this).parent().parent().attr("contenteditable", "false");

                $(this).parent().parent().css("background-color", "transparent");
                $(this).parent().parent().find(".cancelButton").css("background-color", "royalblue");//change cancel button color after update is clicked
                $(this).parent().find(".cancelButton").hide();
                $(this).parent().find(".deleteButton").show();

                var editItem0 = $("#slctd_id").val();
                var editItem1 = $("#slctd_kitID").val();
                var editItem2 = $("#slctd_description").val();
                var editItem3 = $("#slctd_filePath").val();


                alert(
                    "Selected for Edit POST:" + '\n' +
                    "editItem0: " + editItem0 + '\n' +
                    "editItem1: " + editItem1 + '\n' +
                    "editItem2: " + editItem2 + '\n' +
                    "editItem3: " + editItem3 + '\n'
                );

                //begin axios add post
                axios.post('/KitMgmt/UpdateKit', {                   
                    kitID: editItem1,
                    description: editItem2,
                    filePath: editItem3,
                    id: editItem0

                })
                    .then(function (response) {
                        console.log(response);
                    })
                    .catch(function (error) {
                        console.log(error);
                    });
                //end axios add post

            });
            //end confirm edit record

            //begin axios confirm delete record
            $(".btn.btn-primary.confirmButton").click(function () {//when a record's delete button is clicked...
                alert(
                    "Selected for DELETE:" + '\n' +
                    "id: " + selectedItem0 + '\n' +
                    "kitID: " + selectedItem1 + '\n' +
                    "description: " + selectedItem2 + '\n' +
                    "filePath: " + selectedItem3 + '\n'
                );

                axios.post('/KitMgmt/DeleteKit', {
                    id: selectedItem0,
                })
                    .then(function (response) {
                        console.log(response);
                    })
                    .catch(function (error) {
                        console.log(error);
                    });

            });
            //end axios confirm delete record

        });//end document read jquery statements
    </script>
    <!--md bootstrap additions begin-->
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css">
    <!-- Bootstrap core CSS -->
    <link href="~/Content/bootstrap.css" rel="stylesheet">
    <!-- Material Design Bootstrap -->
    <link href="~/Content/mdb.min.css" rel="stylesheet">
    <!-- MDBootstrap Datatables  -->
    <link href="~/Content/MDBootstrap/css/addons/datatables.min.css" rel="stylesheet">
    <!-- Your custom styles (optional) -->
    <link href="" rel="stylesheet">

</head>
<style>
    div.row {
        width: auto;
        height: auto;
        overflow-x: hidden;
        overflow-y: auto;
        padding: 0px;
    }

    .form-group {
        margin: 5px;
    }
</style>

<div class="container-fluid">
    <hr />
    <!--begin inline add-->
    <div class="row">
        <div class="col-md-12">
            <h5>Kit Management</h5>
            <form class="form-inline">
                <div class="form-group">
                    <input type="text" class="form-control form-control-sm" id="addRecordItem1" placeholder="Kit ID" value="">
                </div>
                <div class="form-group">
                    <input type="text" class="form-control form-control-sm" id="addRecordItem2" placeholder="Description" value="">
                </div>
                <div class="form-group">
                    <input type="text" class="form-control form-control-sm" id="addRecordItem3" placeholder="File Path" value="">
                </div>
                <div class="form-group">
                    <input type="text" class="form-control form-control-sm" id="addRecordItem4" placeholder="Kit Item 1" value="">
                </div>
                <div class="form-group">
                    <input type="text" class="form-control form-control-sm" id="addRecordItem5" placeholder="Kit Item 2" value="">
                </div>
                <div class="form-group">
                    <input type="text" class="form-control form-control-sm" id="addRecordItem6" placeholder="Kit Item 3" value="">
                </div>
                <div class="form-group">
                    <input type="text" class="form-control form-control-sm" id="addRecordItem7" placeholder="Kit Item 4" value="">
                </div>
                <div class="form-group">
                    <input type="text" class="form-control form-control-sm" id="addRecordItem8" placeholder="Kit Item 5" value="">
                </div>               
                <button type="submit" class="btn btn-primary btn-sm" id="addButton" style="background-color: royalblue">Add</button>
            </form><hr />
        </div>
    </div>
    <!--end inline add-->
    <!--click event begin-->
    <div>
        <div class="row" style="display:">
            <div class="col-md-1">ID: <input type="text" id="slctd_id" value="slctd_id"></div>
            <div class="col-md-2">Kit ID: <input type="text" id="slctd_kitID" value="slctd_kitID"></div>
            <div class="col-md-2">Desc: <input type="text" id="slctd_description" value="slctd_description"></div>
            <div class="col-md-2">File Path: <input type="text" id="slctd_filePath" value="slctd_filePath"></div>
            @*<div class="col-md-2">Kit Item 1: <input type="text" id="slctd_kitItem_1" value="slctd_kitItem_1"></div>
            <div class="col-md-2">Kit Item 2: <input type="text" id="slctd_kitItem_2" value="slctd_kitItem_2"></div>
            <div class="col-md-2">Kit Item 3: <input type="text" id="slctd_kitItem_3" value="slctd_kitItem_3"></div>
            <div class="col-md-2">Kit Item 4: <input type="text" id="slctd_kitItem_4" value="slctd_kitItem_4"></div>
            <div class="col-md-2">Kit Item 5: <input type="text" id="slctd_kitItem_5" value="slctd_kitItem_5"></div>*@
        </div>
    </div>
    <!--click event end-->
    <!--table begin-->
    <!-- Start your project here-->
    <div style="height: 100vh">
        <table id="datatable_kitmgmt" class="table table-striped table-bordered" cellspacing="0" width="100%">
            <thead>
                <tr>
                    <th class="th-sm">
                        ID
                    </th>
                    <th class="th-sm">
                        Kit ID
                    </th>
                    <th class="th-sm">
                        Description
                    </th>
                    <th class="th-sm">
                        File Path
                    </th>
                    <th class="th-sm">
                        Kit Item 1
                    </th>
                    <th class="th-sm">
                        Kit Item 2
                    </th>
                    <th class="th-sm">
                        Kit Item 3
                    </th>
                    <th class="th-sm">
                        Kit Item 4
                    </th>
                    <th class="th-sm">
                        Kit Item 5
                    </th>
                    <th class="th-sm">
                        Action
                    </th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                <tr class="record" id=@Html.DisplayFor(modelItem => item.id)>
                    <td id="record_item0" value=@Html.DisplayFor(modelItem => item.id)>@Html.DisplayFor(modelItem => item.id)</td>
                    <td id="record_item1" value=@Html.DisplayFor(modelItem => item.kitID)>@Html.DisplayFor(modelItem => item.kitID)</td>
                    <td id="record_item2" value=@Html.DisplayFor(modelItem => item.description)>@Html.DisplayFor(modelItem => item.description)</td>
                    <td id="record_item3" value=@Html.DisplayFor(modelItem => item.filePath)>@Html.DisplayFor(modelItem => item.filePath)</td>

                    <td id="record_item4" value=@Html.DisplayFor(modelItem => item.kitItem_1)>@Html.DisplayFor(modelItem => item.kitItem_1)</td>
                    <td id="record_item5" value=@Html.DisplayFor(modelItem => item.kitItem_2)>@Html.DisplayFor(modelItem => item.kitItem_2)</td>
                    <td id="record_item6" value=@Html.DisplayFor(modelItem => item.kitItem_3)>@Html.DisplayFor(modelItem => item.kitItem_3)</td>
                    <td id="record_item7" value=@Html.DisplayFor(modelItem => item.kitItem_4)>@Html.DisplayFor(modelItem => item.kitItem_4)</td>
                    <td id="record_item8" value=@Html.DisplayFor(modelItem => item.kitItem_5)>@Html.DisplayFor(modelItem => item.kitItem_5)</td>

                    <td>
                        <button class="btn btn-primary btn-sm editButton">Edit</button>
                        <button class="btn btn-primary btn-sm updateButton" style="display:none;">Update</button>
                        <button class="btn btn-primary btn-sm deleteButton">Delete</button>
                        <button class="btn btn-primary btn-sm confirmButton" style="display:none;">Confirm</button>
                        <button class="btn btn-primary btn-sm cancelButton" style="display:none;">Cancel</button>
                    </td>
                </tr>
                }
        </table>
    </div>
    <!-- End your project here-->
    <!--table end-->
</div>
